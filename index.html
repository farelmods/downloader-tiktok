<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOWNLOAD VT TIKTOK</title>
 <style>
  :root {
    --bg-dark: linear-gradient(135deg, #141e30, black);
    --bg-light: #f2f2f2;
    --text-light: white;
    --text-dark: #1c1c1c;
    --accent: #00c6ff;
    --glass-bg: rgba(255, 255, 255, 0.1);
    --glass-blur: blur(20px);
    --glass-border: rgba(255, 255, 255, 0.2);
  }

  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: var(--bg-dark);
    color: var(--text-light);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
    transition: 0.5s;
  }

  body.light-mode {
    background: var(--bg-light);
    color: var(--text-dark);
  }

  .container {
  backdrop-filter: var(--glass-blur);
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 15px;
  padding: 2rem;
  max-width: 480px;
  width: 100%;
  max-height: 80vh; /* Atur tinggi maksimal */
  overflow-y: auto;  /* Aktifkan scroll vertikal */
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
  text-align: center;
  animation: fadeIn 1s ease;
}

  body.light-mode .container {
    background: rgba(255, 255, 255, 0.7);
    border-color: rgba(0, 0, 0, 0.1);
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .title {
    font-size: 2rem;
    font-weight: bold;
    letter-spacing: 1px;
    background: linear-gradient(to right, blue, #ccc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 0.5rem;
  }

  .tagline {
    font-size: 0.9rem;
    color: #cccccc;
    margin-bottom: 1.5rem;
  }

  .input-group {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  input[type="text"] {
    padding: 12px 16px;
    font-size: 1rem;
    border-radius: 12px;
    border: none;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    outline: none;
  }

  body.light-mode input[type="text"] {
    background: rgba(0, 0, 0, 0.05);
    color: #000;
  }

  input[type="text"]::placeholder {
    color: #ccc;
  }

  button {
    padding: 12px;
    font-size: 1rem;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    background: linear-gradient(to right, #black, black);
    color: black;
    transition: all 0.3s ease;
    font-weight: bold;
  }

  button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
  }

  #theme-toggle {
    position: absolute;
    top: 15px;
    right: 15px;
    padding: 6px 12px;
    border: none;
    border-radius: 8px;
    background-color: #fff;
    color: #111;
    font-weight: bold;
    cursor: pointer;
  }

  body.light-mode #theme-toggle {
    background-color: #111;
    color: #fff;
  }

  #loader {
    margin-top: 1rem;
    font-size: 0.95rem;
    color: var(--accent);
  }

  #status-message {
    margin-top: 1rem;
    font-size: 0.9rem;
    color: #ffcc00;
  }

  #video-section {
    margin-top: 2rem;
    animation: fadeIn 0.5s ease;
  }

  .author-info {
    display: flex;
    align-items: center;
    gap: 12px;
    justify-content: center;
    margin-bottom: 1rem;
  }

  .author-info img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 2px solid var(--accent);
    object-fit: cover;
  }

  .author-info span {
    font-weight: bold;
    font-size: 1rem;
  }

  video {
    max-width: 100%;
    border-radius: 15px;
    margin-bottom: 1rem;
    outline: 2px solid var(--accent);
  }

  .description {
    font-size: 0.9rem;
    color: #ddd;
    margin-bottom: 1rem;
  }

  body.light-mode .description {
    color: #333;
  }

  .hidden {
    display: none;
  }

  /* Login Overlay Styles */
  .login-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(10px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    animation: fadeIn 0.5s ease;
  }

  .login-container {
    backdrop-filter: var(--glass-blur);
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 15px;
    padding: 2.5rem;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    text-align: center;
    animation: slideUp 0.6s ease;
  }

  body.light-mode .login-container {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(0, 0, 0, 0.1);
  }

  @keyframes slideUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .login-title {
    font-size: 2rem;
    font-weight: bold;
    letter-spacing: 1px;
    background: linear-gradient(to right, #00c6ff, #0072ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 0.5rem;
  }

  .login-tagline {
    font-size: 0.9rem;
    color: #cccccc;
    margin-bottom: 2rem;
  }

  body.light-mode .login-tagline {
    color: #666;
  }

  .login-form .input-group {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .login-form input[type="text"],
  .login-form input[type="password"] {
    padding: 14px 18px;
    font-size: 1rem;
    border-radius: 12px;
    border: none;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    outline: none;
    transition: all 0.3s ease;
  }

  .login-form input[type="text"]:focus,
  .login-form input[type="password"]:focus {
    background: rgba(255, 255, 255, 0.15);
    transform: scale(1.02);
  }

  body.light-mode .login-form input[type="text"],
  body.light-mode .login-form input[type="password"] {
    background: rgba(0, 0, 0, 0.08);
    color: #000;
  }

  body.light-mode .login-form input[type="text"]:focus,
  body.light-mode .login-form input[type="password"]:focus {
    background: rgba(0, 0, 0, 0.12);
  }

  .remember-me {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
  }

  .remember-me input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--accent);
  }

  .login-form button {
    width: 100%;
    padding: 14px;
    font-size: 1.1rem;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    background: linear-gradient(to right, #00c6ff, #0072ff);
    color: white;
    transition: all 0.3s ease;
    font-weight: bold;
    margin-bottom: 1rem;
  }

  .login-form button:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 198, 255, 0.4);
  }

  .login-form button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .login-error {
    color: #ff4757;
    font-size: 0.9rem;
    margin-bottom: 1rem;
    padding: 10px;
    background: rgba(255, 71, 87, 0.1);
    border-radius: 8px;
    border: 1px solid rgba(255, 71, 87, 0.2);
  }

  .login-hint {
    margin-top: 1rem;
    padding: 10px;
    background: rgba(0, 198, 255, 0.1);
    border-radius: 8px;
    border: 1px solid rgba(0, 198, 255, 0.2);
  }

  .login-hint small {
    color: #00c6ff;
    font-size: 0.8rem;
  }

  body.light-mode .login-hint small {
    color: #0072ff;
  }

  /* Logout Button */
  .logout-btn {
    position: absolute;
    top: 15px;
    left: 15px;
    padding: 8px 15px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(to right, #ff4757, #ff3742);
    color: white;
    font-weight: bold;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    z-index: 100;
  }

  .logout-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
  }

  /* Welcome message */
  .welcome-message {
    position: absolute;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 198, 255, 0.2);
    color: var(--accent);
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: bold;
    animation: slideDown 0.5s ease;
    z-index: 100;
  }

  @keyframes slideDown {
    from { opacity: 0; transform: translate(-50%, -20px); }
    to { opacity: 1; transform: translate(-50%, 0); }
  }

  body.light-mode .welcome-message {
    background: rgba(0, 114, 255, 0.2);
    color: #0072ff;
  }

  @keyframes fadeOut {
    from { opacity: 1; transform: translate(-50%, 0); }
    to { opacity: 0; transform: translate(-50%, -20px); }
  }

  /* Hide main container by default, show when not hidden */
  #main-container {
    display: none;
  }

  #main-container:not(.hidden) {
    display: block;
  }

  /* Override the default hidden styles for main container */
  .container:not(.hidden) {
    display: block !important;
  }

  @media (max-width: 500px) {
    .title {
      font-size: 1.6rem;
    }

    input[type="text"], button {
      font-size: 0.95rem;
    }
  }
</style>
</head>
<body>
  <canvas id="canvas" style="position: fixed; top: 10; left: 10; width: 100%; height: 100%; z-index: -1; pointer-events: none;"></canvas>

  <button id="theme-toggle">üåô</button>
  
  <!-- Login Overlay -->
  <div id="login-overlay" class="login-overlay">
    <div class="login-container">
      <h1 class="login-title">üîê LOGIN</h1>
      <p class="login-tagline">Masuk untuk mengakses TikTok Downloader</p>
      
      <div class="login-form">
        <div class="input-group">
          <input type="text" id="username" placeholder="Username" autocomplete="username">
          <input type="password" id="password" placeholder="Password" autocomplete="current-password">
        </div>
        
        <div class="remember-me">
          <input type="checkbox" id="remember" checked>
          <label for="remember">Remember Me</label>
        </div>
        
        <button id="login-btn" onclick="handleLogin()">LOGIN</button>
        
        <div id="login-error" class="login-error hidden"></div>
        <div id="login-loader" class="hidden">‚è≥ Logging in...</div>
        
        <div class="login-hint">
          <small>üí° Default: <strong>admin</strong> / <strong>password123</strong></small>
        </div>
      </div>
    </div>
  </div>

  <!-- Logout Button -->
  <button id="logout-btn" class="logout-btn hidden" onclick="handleLogout()">üö™ Logout</button>

  <div class="container" id="main-container">
    <h1 class="title">DOWNLOAD VIDEO TIKTOK</h1>
    <p class="tagline">¬© DIBUAT BY FAREL</p>

    <div class="input-group">
      <input type="text" id="tiktok-url" placeholder="Paste your TikTok link here...">
      <button id="fetch-btn" onclick="fetchVideo()">Fetch Video</button>
    </div>

    <div id="loader" class="hidden">‚è≥ Loading...</div>
    <p id="status-message"></p>

    <div id="video-section" class="hidden">
      <div class="author-info">
        <img id="author-avatar" src="" alt="Author Avatar">
        <span id="author-name"></span>
      </div>
      <video id="video-preview" controls></video>
      <p id="video-desc" class="description"></p>
      <button id="download-btn">Download Video</button>
    </div>
  </div>

  <script>
    // Login System
    const LOGIN_CREDENTIALS = {
      admin: 'password123'
    };

    // Check login status on page load
    window.addEventListener('DOMContentLoaded', function() {
      checkLoginStatus();
    });

    function checkLoginStatus() {
      const isLoggedIn = localStorage.getItem('tikTokDownloader_loggedIn');
      const loginOverlay = document.getElementById('login-overlay');
      const mainContainer = document.getElementById('main-container');
      const logoutBtn = document.getElementById('logout-btn');

      if (isLoggedIn === 'true') {
        loginOverlay.classList.add('hidden');
        mainContainer.classList.remove('hidden');
        logoutBtn.classList.remove('hidden');
        showWelcomeMessage();
      } else {
        loginOverlay.classList.remove('hidden');
        mainContainer.classList.add('hidden');
        logoutBtn.classList.add('hidden');
      }
    }

    function handleLogin() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
      const rememberMe = document.getElementById('remember').checked;
      const errorDiv = document.getElementById('login-error');
      const loaderDiv = document.getElementById('login-loader');
      const loginBtn = document.getElementById('login-btn');

      // Clear previous errors
      errorDiv.classList.add('hidden');
      errorDiv.textContent = '';

      // Validate inputs
      if (!username || !password) {
        showLoginError('Please enter both username and password');
        return;
      }

      // Show loading
      loaderDiv.classList.remove('hidden');
      loginBtn.disabled = true;
      loginBtn.textContent = 'Logging in...';

      // Simulate login delay for better UX
      setTimeout(() => {
        // Check credentials
        if (LOGIN_CREDENTIALS[username] && LOGIN_CREDENTIALS[username] === password) {
          // Successful login
          localStorage.setItem('tikTokDownloader_loggedIn', 'true');
          localStorage.setItem('tikTokDownloader_username', username);
          
          if (rememberMe) {
            localStorage.setItem('tikTokDownloader_rememberMe', 'true');
          }

          // Hide login overlay and show main app
          document.getElementById('login-overlay').classList.add('hidden');
          document.getElementById('main-container').classList.remove('hidden');
          document.getElementById('logout-btn').classList.remove('hidden');
          
          showWelcomeMessage();
          clearLoginForm();
        } else {
          // Failed login
          showLoginError('Invalid username or password');
        }

        // Reset loading state
        loaderDiv.classList.add('hidden');
        loginBtn.disabled = false;
        loginBtn.textContent = 'LOGIN';
      }, 1000);
    }

    function handleLogout() {
      // Clear login data
      localStorage.removeItem('tikTokDownloader_loggedIn');
      localStorage.removeItem('tikTokDownloader_username');
      
      // Check if remember me was enabled
      const rememberMe = localStorage.getItem('tikTokDownloader_rememberMe');
      if (!rememberMe) {
        clearLoginForm();
      }

      // Show login overlay and hide main app
      document.getElementById('login-overlay').classList.remove('hidden');
      document.getElementById('main-container').classList.add('hidden');
      document.getElementById('logout-btn').classList.add('hidden');

      // Remove welcome message if exists
      const welcomeMsg = document.querySelector('.welcome-message');
      if (welcomeMsg) {
        welcomeMsg.remove();
      }
    }

    function showLoginError(message) {
      const errorDiv = document.getElementById('login-error');
      errorDiv.textContent = message;
      errorDiv.classList.remove('hidden');
    }

    function clearLoginForm() {
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
      document.getElementById('login-error').classList.add('hidden');
    }

    function showWelcomeMessage() {
      const username = localStorage.getItem('tikTokDownloader_username') || 'User';
      
      // Remove existing welcome message
      const existingMsg = document.querySelector('.welcome-message');
      if (existingMsg) {
        existingMsg.remove();
      }

      // Create welcome message
      const welcomeMsg = document.createElement('div');
      welcomeMsg.className = 'welcome-message';
      welcomeMsg.textContent = `Welcome back, ${username}! üëã`;
      document.body.appendChild(welcomeMsg);

      // Auto remove after 3 seconds
      setTimeout(() => {
        if (welcomeMsg && welcomeMsg.parentNode) {
          welcomeMsg.style.animation = 'fadeOut 0.5s ease';
          setTimeout(() => welcomeMsg.remove(), 500);
        }
      }, 3000);
    }

    // Handle Enter key in login form
    document.addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && !document.getElementById('login-overlay').classList.contains('hidden')) {
        handleLogin();
      }
    });

    // Theme Toggle (existing functionality)
    const themeBtn = document.getElementById("theme-toggle");
    const body = document.body;

    if (localStorage.getItem("theme") === "light") {
      body.classList.add("light-mode");
      themeBtn.textContent = "üåô";
    }

    themeBtn.onclick = () => {
      body.classList.toggle("light-mode");
      const theme = body.classList.contains("light-mode") ? "light" : "dark";
      themeBtn.textContent = theme === "light" ? "üåô" : "üîÜ";
      localStorage.setItem("theme", theme);
    };

    async function fetchVideo() {
      const url = document.getElementById("tiktok-url").value.trim();
      const status = document.getElementById("status-message");
      const loader = document.getElementById("loader");
      const button = document.getElementById("fetch-btn");

      if (!url || !url.includes("tiktok.com")) {
        status.textContent = "Please enter a valid TikTok URL.";
        return;
      }

      status.textContent = "";
      loader.classList.remove("hidden");
      button.disabled = true;
      button.textContent = "Fetching...";

      try {
        const response = await fetch(`https://apis.davidcyriltech.my.id/download/tiktok?url=${encodeURIComponent(url)}`);
        const data = await response.json();

        if (data.success) {
          const videoUrl = data.result.video;
          const avatar = data.result.author?.avatar || "https://via.placeholder.com/50";
          const nickname = data.result.author?.nickname || "Unknown";
          const desc = data.result.desc || "No description provided.";

          document.getElementById("video-preview").src = videoUrl;
          document.getElementById("author-avatar").src = avatar;
          document.getElementById("author-name").textContent = nickname;
          document.getElementById("video-desc").textContent = desc;
          document.getElementById("video-section").classList.remove("hidden");

          document.getElementById("download-btn").onclick = async () => {
            try {
              const videoRes = await fetch(videoUrl);
              const blob = await videoRes.blob();
              const blobUrl = URL.createObjectURL(blob);

              const a = document.createElement("a");
              a.href = blobUrl;
              a.download = "tiktok-video.mp4";
              document.body.appendChild(a);
              a.click();
              document.body.removeChild(a);
              URL.revokeObjectURL(blobUrl);
            } catch {
              alert("Failed to download video.");
            }
          };

          status.textContent = "";
        } else {
          status.textContent = "Failed to fetch video. Please check the TikTok link.";
        }
      } catch (err) {
        console.error("Fetch error:", err);
        status.textContent = "An error occurred. Please try again later.";
      } finally {
        loader.classList.add("hidden");
        button.disabled = false;
        button.textContent = "Fetch Video";
      }
    }
  </script>
  <script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');

  // Fungsi untuk resize canvas secara dinamis
  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }

  // Resize saat awal dan setiap kali ukuran jendela berubah
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);

  const emojis = ['üòé', 'ü§ô', 'üòç', 'üòé', 'ü•≥', 'üòå', 'ü§ü', '‚ú®', 'üî•', 'üí´', '', 'ü•¥'];

  class Emoji {
    constructor() {
      this.reset();
    }

    reset() {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * -canvas.height;
      this.size = 24 + Math.random() * 16; // Ukuran emoji
      this.speed = 0.3 + Math.random() * 0.6; // Kecepatan jatuh
      this.char = emojis[Math.floor(Math.random() * emojis.length)];
    }

    update() {
      this.y += this.speed;
      if (this.y > canvas.height + this.size) {
        this.reset();
        this.y = 0 - this.size;
      }
    }

    draw() {
      ctx.font = `${this.size}px serif`;
      ctx.fillStyle = "#ffffffcc"; // Sedikit transparan
      ctx.fillText(this.char, this.x, this.y);
    }
  }

  // Tentukan jumlah emoji berdasarkan ukuran layar
  const baseCount = window.innerWidth > 768 ? 60 : 30;
  const emojiArray = Array.from({ length: baseCount }, () => new Emoji());

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    emojiArray.forEach((emoji) => {
      emoji.update();
      emoji.draw();
    });
    requestAnimationFrame(animate);
  }

  animate();
</script>

</body>
</html>